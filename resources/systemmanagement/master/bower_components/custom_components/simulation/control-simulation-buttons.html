<link rel="import" href="../../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../paper-button/paper-button.html">
<link rel="import" href="../../iron-icons/av-icons.html">


<dom-module id="control-simulation-buttons">
    <template>
        <style>
            :host {
                display: block;
            }

            paper-button{
                width: 50px;
                margin:0;
                font-size: medium;
            }
            paper-button[disabled]{
                background: transparent;
            }
            .button{
                width: auto;
            }

        </style>
        <div class="layout horizontal center-justified button">
            <paper-button raised id="play" on-tap="showButton"><iron-icon icon="av:play-circle-filled"></iron-icon> Play</paper-button>
            <paper-button raised disabled id="pause" on-tap="showButton"><iron-icon icon="av:pause-circle-outline"></iron-icon>Pause</paper-button>
            <paper-button raised disabled id="stop" on-tap="showButton"><iron-icon icon="av:stop"></iron-icon>Stop</paper-button>
        </div>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'control-simulation-buttons',
        behaviors: [
            Polymer.NeonSharedElementAnimatableBehavior
        ],

        properties: {
            simID:{
                type:String
            },
            status:{
                type:String
            }
        },


        showButton: function (event) {
            var id = ""
            if (status) {
                id = getId(status);
                console.log("ci sono!");
            } else {
                id = event.target.id;
            }

            prev = event.target.parentElement;
            switch (id) {
                case "pause":
                    this.$.play.disabled = false;
                    this.$.stop.disabled = false;
                    console.log("Done!");
                    break;
                case "stop":
                    this.$.play.disabled = false;
                    this.$.pause.disabled = true;
                    console.log("Done!");
                    break;
                case "play":
                    this.$.stop.disabled = false;
                    this.$.pause.disabled = false;
                    console.log("Done!");
                    break;
            }
            if (id) {
                this.$$("#" + id).disabled = true;
                this.fire('submit-sim', {
                    tile: prev,
                    data: "" + id
                });
            }

            getId: function(status) {
                newStatus = status.toLowerCase();
                switch (newStatus) {
                    case "started":
                        return "play";

                    case "finished":
                        return "stop";

                    case "paused":
                        return "pause";
                    default :
                        return "";
                        break;
                }

            }
        }
    });
</script>