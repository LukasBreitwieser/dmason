<link rel="import" href="../../paper-styles/typography.html">
<link rel="import" href="../../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../neon-animation/neon-shared-element-animatable-behavior.html">
<link rel="import" href="../../neon-animation/animations/ripple-animation.html">
<link rel="import" href="../../neon-animation/animations/hero-animation.html">

<dom-module id="simulation-info">
    <template>
        <style>
            :host {
                display: block;
            }

        </style>

        <table>
            <tr><td><span>ID:</span></td><td><span>{{sim.id}}</span></td></tr>
            <tr><td><span>Name:</span></td><td><span>{{sim.name}}</span></td></tr>
            <tr><td><span>Partitioning:</span></td><td><span>{{sim.partitioning}}</span></td></tr>
            <tr><td><span>Num. of Cells:</span></td><td><span>{{sim.num_cell}}</span></td></tr>
            <tr><td><span>Num. of Worker:</span></td><td><span>{{sim.num_worker}}</span></td></tr>
            <tr><td><span>Start:</span></td><td><span id="time">{{sim.start}}</span></td></tr>
            <tr><td><span>Steps:</span></td><td><span id="step">{{sim.step}}</span></td></tr>
        </table>

    </template>
</dom-module>

<script>
    Polymer({
        is: 'simulation-info',
        behaviors: [
            Polymer.NeonSharedElementAnimatableBehavior
        ],

        properties: {
            sim:{
                type: Object
            },
            animationConfig: {
                type: Object,
                value: function() {
                    return {
                        'exit': [{
                            name: 'ripple-animation',
                            id: 'ripple',
                            fromPage: this
                        },
                            {
                                name: 'hero-animation',
                                id: 'hero',
                                fromPage: this
                            }]
                    }
                }
            }
        },

        listeners: {
            click: '_onClick'
        },

        _onClick: function(event) {

            var target = event.target;

            while(target.tagName.toLowerCase() != "simulation-info")
                target = target.parentElement;

            // configure the page animation
            this.sharedElements = {
                'hero': target,
                'ripple': target
            };
            this.animationConfig['exit'][0].gesture = {
                x: event.x || event.pageX,
                y: event.y || event.pageY
            };
            this.fire('tile-click', {
                tile: target,
                data: this.sim
            });
        }
    });
</script>